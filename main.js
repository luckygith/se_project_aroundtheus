!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:"modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"};class t{constructor(e,t,n){let{name:s,link:o}=e;this._name=s,this._link=o,this._cardSelector=t,this._handleImageClick=n}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteButton.addEventListener("click",this._handleDeleteCard),console.log(this._cardImageElement),this._cardImageElement.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link})))}_handleLikeIcon=()=>{this._likeButton.classList.toggle("cards__like-button_active")};_handleDeleteCard=()=>{this._element.remove(),this._element=null};getView(){return this._element=document.querySelector(this._cardSelector).content.querySelector(".cards__list-item").cloneNode(!0),this._likeButton=this._element.querySelector(".cards__like-button"),this._deleteButton=this._element.querySelector(".cards__delete-button"),this._cardTitleElement=this._element.querySelector(".cards__title"),this._cardImageElement=this._element.querySelector(".cards__image"),this._cardTitleElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._element}}class n{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t}_setEventListeners(){this._submitButton=this._element.querySelector(".modal__button"),this._inputElements=Array.from(this._element.querySelectorAll(this._inputSelector)),this._disableButton(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}resetValidation(){this.toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}_showInputError(e,t){const n=this._element.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}_hideInputError(e){const t=this._element.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e,e.validationMessage);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableButton():this._enableButton()}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscapeClose=this._handleEscapeClose.bind(this),this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeModalOnClick=this._closeModalOnClick.bind(this),this._handleModalBackgroundClick=this._handleModalBackgroundClick.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),document.addEventListener("click",this._handleModalBackgroundClick),this._closeButton.addEventListener("click",this._closeModalOnClick)}close(){document.removeEventListener("keydown",this._handleEscapeClose),document.removeEventListener("click",this._handleModalBackgroundClick),this._closeButton.removeEventListener("click",this._closeModalOnClick),this._popupElement.classList.remove("modal_opened")}_handleEscapeClose(e){"Escape"===e.key&&this.close()}_handleModalBackgroundClick(e){e.target===this._popupElement&&this.close()}_closeModalOnClick(){this.close()}}class o extends s{constructor(t,n){super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector}open(){super.open(),this._popupForm.addEventListener("submit",this._handleFormSubmit)}close(){super.close(),this._popupForm.removeEventListener("submit",this._handleFormSubmit),this._popupForm.reset()}_getInputValues(){const e={};return this._popupForm.querySelectorAll(this._inputSelector).forEach((t=>{e[t.name]=t.value})),e}_handleFormSubmit(e){e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()}}const i=document.querySelector("#profile-add-button"),l=document.querySelector("#profile-edit-button"),r=(document.querySelector(".profile__title "),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),a=document.querySelector("#profile-description-input"),c=(document.querySelector(".cards__list-item"),document.querySelector(".modal__image")),u=document.querySelector("#card-title-input"),d=document.querySelector("#card-url-input"),m=document.querySelector("#profile-edit-modal"),_=m.querySelector(".modal__form_profile"),h=document.querySelector("#add-card-modal"),p=(document.querySelector(".cards__list"),document.querySelector("#add-card-form")),E=new class extends s{constructor(e){super(e),this._modalImage=document.querySelector(".modal__image"),this._modalText=document.querySelector(".modal__text")}open(e){let{name:t,link:n}=e;this._modalImage.alt=t,this._modalImage.src=n,this._modalText.textContent=t,super.open()}}("#preview-image-modal"),S=new n(e,_),k=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountians",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:b},".cards__list");k.renderItems();const g=new o("#profile-edit-modal",(function(){const e=r.value,t=a.value;v.setUserInfo({name:e,description:t}),g.close()}));console.log(m);const v=new class{constructor(e){let{titleSelector:t,occupationSelector:n}=e;this._profileTitleElement=document.querySelector(t),this._profileDescriptionElement=document.querySelector(n)}getUserInfo(){return{name:this._profileTitleElement.textContent,description:this._profileDescriptionElement.textContent}}setUserInfo(e){let{name:t,description:n}=e;console.log("setUSER WORKING"),this._profileTitleElement.textContent=t,this._profileDescriptionElement.textContent=n}}({titleSelector:".profile__title",occupationSelector:".profile__description"}),y=new o("#add-card-modal",(function(e){const t=b({name:u.value,link:d.value});k.addItem(t),y.close()}));console.log(h);const f=new n(e,p);function C(e){c.alt=e.name,c.src=e.link,modalText.textContent=e.name,E.open(e)}function b(e){return new t(e,"#card-template",C).getView()}f.enableValidation(),S.enableValidation(),l.addEventListener("click",(()=>{f.resetValidation();const{name:e,description:t}=v.getUserInfo();r.value=e,a.value=t,g.open()})),i.addEventListener("click",(()=>{y.open(),f.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvdXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEVTQ19LRVlDT0RFID0gMjc7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRpYW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uczogXCIucGxhY2VzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbiAgcHJldmlld0ltYWdlOiBcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIsXHJcbiAgYWRkTmV3Q2FyZE1vZGFsOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxyXG4gIGVkaXRQcm9maWxlTW9kYWw6IFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIHByb2ZpbGVUaXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBwcm9maWxlVGl0bGVJbnB1dDogXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dDogXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiLFxyXG4gIGFkZE5ld0NhcmRGb3JtOiBcIiNhZGQtY2FyZC1mb3JtXCIsXHJcbiAgZWRpdFByb2ZpbGVGb3JtOiBcIiNlZGl0LXByb2ZpbGUtZm9ybVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwibW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbn07XHJcbiIsIi8vIGNvbnN0IGNhcmRUZW1wbGF0ZSA9XHJcbi8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbi8vIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAvL3RoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZEVsZW1lbnQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgLy8gICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VJY29uKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5fY2FyZEltYWdlRWxlbWVudCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgLy8qKioqKioqKlxyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAvLyAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcIi5jYXJkc19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIC8vIH1cclxuXHJcbiAgLy8gX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgLy8gICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIC8vICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgLy8gfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0LWl0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgLy8gZmlsbCB0aGlzLl9lbGVtZW50IHdpdGggdGhlIGRhdGE6IG5hbWUsIGxpbms8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PFxyXG5cclxuICAgIC8vc2V0IGV2ZW50bGlzdGVuZVxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vcmV0dXJuIGNhcmRcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH0gLy9leGNsdWRpbmcgZm9ybXNlbGVjdG9yIHNpbmNlIGl0IHdpbGwgYmUgYSBzZWNvbmQgYXJndW1lbnRcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgLy8gdGhpcy5fc3VibWl0QnV0dG9uID0gc3VibWl0QnV0dG9uO1xyXG4gICAgLy8gdGhpcy5faW5wdXRFbGVtZW50cyA9IGlucHV0RWxlbWVudHM7XHJcblxyXG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIC8vIGNvbnN0IGlucHV0RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbnB1dFNlbGVjdG9yKTtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIC8vIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgLy8gcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIC8vIGNvbnN0IGlucHV0RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbnB1dFNlbGVjdG9yKTtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAvLyBjb25zdCBpbnB1dEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICAvLyBjb25zdCBpbnB1dEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgLy92YWxpZCBtdXN0IGhhdmUgYWxsIHZhbGlkXHJcbiAgICByZXR1cm4gIWlucHV0TGlzdC5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVsZW1lbnRzKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAvL2V4cG9ydGRlZmF1bHQgaXMgdGhlIHBhcmVudCBvZiBQb3B1cHdpdGggZm9ybSBhbmQgd2l0aCBpbWFnZVxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlLmJpbmQodGhpcyk7IC8vQVNLXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2Nsb3NlTW9kYWxPbkNsaWNrID0gdGhpcy5fY2xvc2VNb2RhbE9uQ2xpY2suYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZU1vZGFsQmFja2dyb3VuZENsaWNrID1cclxuICAgICAgdGhpcy5faGFuZGxlTW9kYWxCYWNrZ3JvdW5kQ2xpY2suYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVNb2RhbEJhY2tncm91bmRDbGljayk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xvc2VNb2RhbE9uQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTW9kYWxCYWNrZ3JvdW5kQ2xpY2spO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlTW9kYWxPbkNsaWNrKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZUNsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVNb2RhbEJhY2tncm91bmRDbGljayhldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jbG9zZU1vZGFsT25DbGljaygpIHtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuLy8gY29uc29sZS5sb2coXCJCYWNrZ3JvdW5kIGxpc3RlbmVyIG9uXCIpO1xyXG4vLyBjb25zb2xlLmxvZyhcIkV2ZW50IHRhcmdldDpcIiwgZXZlbnQudGFyZ2V0KTtcclxuLy8gY29uc29sZS5sb2coXCJ0aGlzLl9wb3B1cEVsZW1lbnQ6XCIsIHRoaXMuX3BvcHVwRWxlbWVudCk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAvL3RoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZvcm1TdWJtaXQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vUkVNT1ZFRCBhbmQgdXRpbGl6ZWQgdXNpbmcgdGhlIHZhbGlkYXRvciBjbGFzc1xyXG4vLyBfZGlzYWJsZUJ1dHRvbigpIHtcclxuLy8gICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuLy8gICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4vLyB9XHJcblxyXG4vLyBfZW5hYmxlQnV0dG9uKCkge1xyXG4vLyAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4vLyAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4vLyB9XHJcbiIsIi8vSU1QT1JUIEFMTCBDTEFTU0VTXHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2VsZWN0b3JzLCBjb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzXCI7XHJcblxyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuXHJcbi8vIENPTlNUQU5UXHJcblxyXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTsgLy9zdG9yaW5nIGVkaXQgYnV0dG9uIGluc2lkZSB0aGlzIHZhcmlhYmxlXHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGUgXCIpOyAvL3RhcmdldCBpZCBvbiBIVE1MIGFuZCBjcmVhdGUgdmFyaWFibGUgb24gSlNcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuLy9jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkc0xpc3RJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdC1pdGVtXCIpO1xyXG5jb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBjYXJkVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdXJsLWlucHV0XCIpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fcHJvZmlsZVwiKTtcclxuXHJcbmNvbnN0IGFkZE5ld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcblxyXG5jb25zdCBjYXJkc0xpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XHJcblxyXG4vL0NSRUFURSBORVcgSU5TVEFOQ0VTIE9GIEFMTCBDTEFTU0VTIC8vIElOSVRJQUxJWkVcclxuXHJcbmNvbnN0IGNhcmRQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuLy9jYXJkUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGVkaXRQcm9maWxlRm9ybSk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogY3JlYXRlQ2FyZCxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBzZWxlY3RvcnMuZWRpdFByb2ZpbGVNb2RhbCxcclxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuLy9lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zb2xlLmxvZyhlZGl0UHJvZmlsZU1vZGFsKTtcclxuXHJcbmNvbnN0IGVkaXRVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBvY2N1cGF0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgc2VsZWN0b3JzLmFkZE5ld0NhcmRNb2RhbCxcclxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxyXG4pO1xyXG5jb25zb2xlLmxvZyhhZGROZXdDYXJkTW9kYWwpO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcclxuYWRkTmV3Q2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gRlVOQ1RJT05TXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XHJcbiAgbW9kYWxJbWFnZS5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gIG1vZGFsSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcclxuICBtb2RhbFRleHQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gIGNhcmRQcmV2aWV3UG9wdXAub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcblxyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZXZlbnQpIHtcclxuICBjb25zdCBuYW1lID0gY2FyZFRpdGxlSW5wdXQudmFsdWU7XHJcbiAgY29uc3QgbGluayA9IGNhcmRVcmxJbnB1dC52YWx1ZTtcclxuICAvL21vZGFsSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAvLyBtb2RhbEltYWdlLnNyYyA9IGxpbms7XHJcbiAgLy9tb2RhbFRleHQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xyXG5cclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0sIG1vZGFsSW1hZ2UpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gIGFkZE5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQoKSB7XHJcbiAgY29uc3QgbmFtZSA9IHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlO1xyXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XHJcblxyXG4gIGVkaXRVc2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pO1xyXG4gIC8vIGVkaXRVc2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pO1xyXG5cclxuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAgIGNhcmREYXRhLm5hbWUgPSBjYXJkVGl0bGVJbnB1dC52YWx1ZTtcclxuLy8gICBjYXJkRGF0YS5saW5rID0gY2FyZFVybElucHV0LnZhbHVlO1xyXG4vLyAgIC8vIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZCh7IG5hbWUsIGxpbmsgfSk7XHJcbi8vICAgLy8gY2FyZHNMaXN0RWxlbWVudC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuLy8gICAvL3RoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZEVsZW1lbnQoKTtcclxuLy8gICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbi8vIH1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTmV3Q2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gZWRpdFVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xyXG5cclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkTmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxuICBhZGROZXdDYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAvLyB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgLy8gICBgJHtwb3B1cFNlbGVjdG9yfSAjcHJldmlld0ltYWdlTW9kYWxgXHJcbiAgICAvLyk7XHJcbiAgICB0aGlzLl9tb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9tb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX190ZXh0XCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fbW9kYWxJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fbW9kYWxUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4vLyAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4vLyAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpXHJcbi8vICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuLy8gICAgICAgdGhpcy5jbG9zZSgpO1xyXG4vLyAgICAgfSk7XHJcbi8vIH1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvL29iamVjdCB0aGF0IGhhcyBhIHBvcGVydHkgY2FsbGVkIHJlbmRlcmVyIHRoYXRzIGVxdWFsIHRvIGEgZnVuY3Rpb25cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy9VU0UgVEhJUy5fUkVOREVSRVIgVE8gQ1JFQVRFIFRIRSBFTEVNRU5UUyBGT1IgUkVOREVSSU5HXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgdGhpcy5hZGRJdGVtKGVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL1RBS0UgVEhFIElURU0gQU5EIFJFTkRFUiBJVCBJTlRPIFRISVMuX0VMRU1FTlRcclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRpdGxlU2VsZWN0b3IsIG9jY3VwYXRpb25TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wcm9maWxlVGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPVxyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9jY3VwYXRpb25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXJcclxuXHJcbiAgICAvLyBjb25zdCBpbnB1dFZhbHVlcyA9IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3Byb2ZpbGVUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIC8vIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHRoaXMuZ2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gICAgY29uc29sZS5sb2coXCJzZXRVU0VSIFdPUktJTkdcIik7XHJcbiAgICB0aGlzLl9wcm9maWxlVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuXHJcbi8vIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xyXG4vLyBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuLy8gcHJvZmlsZVVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4iXSwibmFtZXMiOlsiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJjb25zb2xlIiwibG9nIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Rpc2FibGVCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwicmVzZXRWYWxpZGF0aW9uIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiYmluZCIsIl9jbG9zZUJ1dHRvbiIsIl9jbG9zZU1vZGFsT25DbGljayIsIl9oYW5kbGVNb2RhbEJhY2tncm91bmRDbGljayIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwibW9kYWxJbWFnZSIsImNhcmRUaXRsZUlucHV0IiwiY2FyZFVybElucHV0IiwiZWRpdFByb2ZpbGVNb2RhbCIsImVkaXRQcm9maWxlRm9ybSIsImFkZE5ld0NhcmRNb2RhbCIsImFkZENhcmRGb3JtIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9tb2RhbEltYWdlIiwiX21vZGFsVGV4dCIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJhZGRJdGVtIiwicHJlcGVuZCIsImNyZWF0ZUNhcmQiLCJlZGl0UHJvZmlsZVBvcHVwIiwiZGVzY3JpcHRpb24iLCJlZGl0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInRpdGxlU2VsZWN0b3IiLCJvY2N1cGF0aW9uU2VsZWN0b3IiLCJfcHJvZmlsZVRpdGxlRWxlbWVudCIsIl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJfcmVmMiIsImFkZE5ld0NhcmRQb3B1cCIsImNhcmRFbGVtZW50IiwiYWRkTmV3Q2FyZEZvcm1WYWxpZGF0b3IiLCJjYXJkRGF0YSIsIm1vZGFsVGV4dCJdLCJzb3VyY2VSb290IjoiIn0=